<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WAV String Player</title>
</head>
<body>
    <h1>WAV String Player</h1>
    
    <textarea id="wavString" style="width: 80%; height: 200px;" placeholder="Вставьте строковый код WAV..."></textarea>
    <br>
    
    <button onclick="playAudio()">Играть</button>
    <button onclick="stopAudio()">Стоп</button>
    <button onclick="clearInput()">Очистить</button>  <!-- Новая кнопка -->
    
    <script>
        function playAudio() {
            const wavString = document.getElementById("wavString").value;
            if (!wavString) {
                alert("Введите строковый код!");
                return;
            }
            
            const binaryData = atob(wavString);
            const byteArray = new Uint8Array(binaryData.length);
            for (let i = 0; i < binaryData.length; i++) {
                byteArray[i] = binaryData.charCodeAt(i);
            }

            const audioContext = new (window.AudioContext || window.webkitAudioContext)();
            audioContext.decodeAudioData(byteArray.buffer, (buffer) => {
                const source = audioContext.createBufferSource();
                source.buffer = buffer;
                source.connect(audioContext.destination);
                source.start();
            }, (error) => {
                alert("Ошибка декодирования аудио!");
                console.error(error);
            });
        }

        function stopAudio() {
            if (audioContext) {
                audioContext.suspend();
            }
        }

        function clearInput() {
            document.getElementById("wavString").value = "";
        }
    </script>
</body>
</html>
